{
switch (regularization) {
case L2:
    return u / (1 + 2 * alpha * gamma);
case L1:
  return Math.max(u - alpha * gamma,0) + Math.min(u + alpha * gamma,0);
default :
throw new RuntimeException("Unknown regularization function " + regularization);
}
}
