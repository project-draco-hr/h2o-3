{
  if (_parent == null)   throw new IllegalArgumentException("Cannot pop the parent scope!");
  Key k=isAry() ? peekAry()._key : null;
  Set<String> local=_local._table.keySet();
  for (  String name : local) {
    Frame f;
    if (_local.getType(name) == LARY) {
      f=_local.getFrame(name);
      if (isAry() && f == peekAry())       continue;
 else       cleanup(f);
    }
  }
  _local.clear();
  for (  Key key : _locked) {
    if (k != null && k == key)     continue;
    if (isAry() && Arrays.asList(peekAry().keys()).contains(key))     continue;
  }
  _locked.clear();
  for (  Vec v : _refcnt.keySet()) {
    if (_refcnt.get(v)._val == 0 && !hasLock(v._key))     Keyed.remove(v._key);
  }
}
