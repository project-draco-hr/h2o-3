def run_test(sys_args, test_to_run):
    global _IPYNB_
    parse_args(sys_args)
    h2o.init(ip=_H2O_IP_, port=_H2O_PORT_, strict_version_check=False)
    h2o.log_and_echo('------------------------------------------------------------')
    h2o.log_and_echo('')
    h2o.log_and_echo(('STARTING TEST: ' + str(h2o.ou())))
    h2o.log_and_echo('')
    h2o.log_and_echo('------------------------------------------------------------')
    try:
        if _IPYNB_:
            utils.ipy_notebook_exec(_IPYNB_, save_and_norun=False)
        else:
            test_to_run()
    finally:
        h2o.remove_all()
