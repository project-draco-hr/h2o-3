{
  StringBuilder sb=new StringBuilder();
  sb.append(header);
  sb.append(supers);
  String mimpl=impl + "_impl";
  for (  CtMethod mth : iced_cc.getDeclaredMethods())   if (mth.getName().equals(mimpl)) {
    if (javassist.Modifier.isAbstract(mth.getModifiers()) || javassist.Modifier.isVolatile(mth.getModifiers()))     sb.append(impl.startsWith("write") ? "    return ab;\n  }" : "    return ice;\n  }");
 else     sb.append("    return ice.").append(mimpl).append("(ab);\n  }");
    mimpl=null;
    break;
  }
  CtField ctfs[]=iced_cc.getDeclaredFields();
  for (  CtField ctf : ctfs) {
    if (mimpl == null)     break;
    int mods=ctf.getModifiers();
    if (javassist.Modifier.isTransient(mods) || javassist.Modifier.isStatic(mods))     continue;
    if (ctf.hasAnnotation(API.class))     if (((API)ctf.getAvailableAnnotations()[0]).json() == false)     continue;
    if (field_sep1 != null) {
      sb.append(field_sep1);
      field_sep1=null;
    }
 else     if (field_sep2 != null)     sb.append(field_sep2);
    CtClass ctft=ctf.getType();
    CtClass base=ctft;
    while (base.isArray())     base=base.getComponentType();
    boolean can_access=!javassist.Modifier.isPrivate(mods);
    if ((impl.equals("read") || impl.equals("copyOver")) && javassist.Modifier.isFinal(mods))     can_access=false;
    long off=_unsafe.objectFieldOffset(iced_clazz.getDeclaredField(ctf.getName()));
    int ftype=ftype(iced_cc,ctf.getSignature());
    if (ftype % 20 == 9 || ftype % 20 == 11) {
      sb.append(can_access ? iced : iced_unsafe);
    }
 else     if (ftype % 20 == 10) {
      sb.append(can_access ? enums : enums_unsafe);
    }
 else {
      sb.append(can_access ? prims : prims_unsafe);
    }
    String z=FLDSZ1[ftype % 20];
    for (int i=0; i < ftype / 20; ++i)     z='A' + z;
    subsub(sb,"%z",z);
    subsub(sb,"%s",ctf.getName());
    subsub(sb,"%c",dollarsub(base.getName()));
    subsub(sb,"%C",dollarsub(ctft.getName()));
    subsub(sb,"%d","" + off);
    subsub(sb,"%u",utype(ctf.getSignature()));
  }
  if (mimpl != null)   sb.append(trailer);
  String body=sb.toString();
  addMethod(body,icer_cc);
  return body;
}
