{
  Scope.enter();
  try {
    File file=find_test_file("bigdata/laptop/mnist/train.csv.gz");
    File valid=find_test_file("bigdata/laptop/mnist/test.csv.gz");
    if (file != null) {
      NFSFileVec trainfv=NFSFileVec.make(file);
      Frame frame=ParseDataset.parse(Key.make(),trainfv._key);
      NFSFileVec validfv=NFSFileVec.make(valid);
      Frame vframe=ParseDataset.parse(Key.make(),validfv._key);
      DeepLearningParameters p=new DeepLearningParameters();
      p._model_id=Key.make("dl_mnist_model");
      p._train=frame._key;
      p._response_column="C785";
      p._activation=DeepLearningParameters.Activation.RectifierWithDropout;
      p._hidden=new int[]{800,800};
      p._input_dropout_ratio=0.2;
      p._mini_batch_size=1;
      p._train_samples_per_iteration=-1;
      p._score_duty_cycle=0.4;
      p._epochs=10 * 5. / 6;
      p._sparse=true;
      int ci=frame.find("C785");
      Scope.track(frame.replace(ci,frame.vecs()[ci].toCategoricalVec())._key);
      Scope.track(vframe.replace(ci,vframe.vecs()[ci].toCategoricalVec())._key);
      DKV.put(frame);
      DKV.put(vframe);
      p._adaptive_rate=true;
      p._replicate_training_data=true;
      p._overwrite_with_best_model=true;
      p._classification_stop=-1;
      p._score_interval=5;
      p._score_training_samples=10000;
      DeepLearning dl=new DeepLearning(p);
      DeepLearningModel model=null;
      try {
        model=dl.trainModel().get();
      }
 catch (      Throwable t) {
        t.printStackTrace();
        throw new RuntimeException(t);
      }
 finally {
        dl.remove();
        if (model != null) {
          model.delete();
        }
      }
    }
 else {
      Log.info("Please run ./gradlew syncBigDataLaptop in the top-level directory of h2o-3.");
    }
  }
 catch (  Throwable t) {
    t.printStackTrace();
    throw new RuntimeException(t);
  }
 finally {
    Scope.exit();
  }
}
