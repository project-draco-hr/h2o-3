{
  Scope.enter();
  try {
    File file=find_test_file("bigdata/laptop/mnist/train.csv.gz");
    if (file != null) {
      NFSFileVec trainfv=NFSFileVec.make(file);
      Frame frame=ParseDataset.parse(Key.make(),trainfv._key);
      DeepLearningParameters p=new DeepLearningParameters();
      p._destination_key=Key.make("dl_mnist_model");
      p._train=frame._key;
      p._response_column="C785";
      p._activation=DeepLearningParameters.Activation.RectifierWithDropout;
      p._input_dropout_ratio=0.2;
      p._hidden=new int[]{200,200};
      p._train_samples_per_iteration=-1;
      p._epochs=10;
      p._l1=1e-5;
      p._loss=DeepLearningParameters.Loss.Huber;
      int ci=frame.find("C785");
      Scope.track(frame.replace(ci,frame.vecs()[ci].toEnum())._key);
      DKV.put(frame);
      p._adaptive_rate=true;
      p._diagnostics=true;
      p._score_interval=5;
      DeepLearning dl=new DeepLearning(p);
      DeepLearningModel model=null;
      try {
        model=dl.trainModel().get();
        if (model != null) {
          Assert.assertTrue(1000. * model.model_info().get_processed_total() / model.run_time > 20);
        }
      }
 catch (      Throwable t) {
        t.printStackTrace();
        throw new RuntimeException(t);
      }
 finally {
        dl.remove();
        if (model != null) {
          model.delete_xval_models();
          model.delete();
        }
      }
    }
 else {
      Log.info("Please run ./gradlew syncBigDataLaptop in the top-level directory of h2o-dev.");
    }
  }
 catch (  Throwable t) {
    t.printStackTrace();
    throw new RuntimeException(t);
  }
 finally {
    Scope.exit();
  }
}
