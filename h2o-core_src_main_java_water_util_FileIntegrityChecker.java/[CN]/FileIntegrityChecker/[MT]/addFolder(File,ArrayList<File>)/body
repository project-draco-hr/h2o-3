{
  if (!folder.canRead())   return;
  File[] files=folder.listFiles();
  if (files != null) {
    for (    File f : files) {
      if (!f.canRead())       continue;
      if (f.isHidden() && !folder.isHidden())       continue;
      if (f.isDirectory())       addFolder(f,filesInProgress);
 else       filesInProgress.add(f);
    }
  }
 else {
    filesInProgress.add(folder);
  }
}
