{
  if (Double.isNaN(d)) {
    return "NA";
  }
  return useDecimalOutput ? Double.toString(d) : Double.toHexString(d);
}
