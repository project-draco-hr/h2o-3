{
  ModelMetrics mm=null;
  if (_output.getModelCategory() == Model.ModelCategory.Binomial) {
    SupervisedModel sm=(SupervisedModel)this;
    AUC auc=new AUC();
    ConfusionMatrix cm=new ConfusionMatrix();
    HitRatio hr=new HitRatio();
    sm.calcError(frame,frame.vec(_output.responseName()),predictions,predictions,"Prediction error:",true,20,cm,auc,hr);
    mm=ModelMetrics.createModelMetrics(this,frame,System.currentTimeMillis() - start_time,start_time,auc.aucdata,cm);
  }
 else   if (_output.getModelCategory() == Model.ModelCategory.Regression) {
    SupervisedModel sm=(SupervisedModel)this;
    sm.calcError(frame,frame.vec(_output.responseName()),predictions,predictions,"Prediction error:",true,20,null,null,null);
    mm=ModelMetrics.createModelMetrics(this,frame,System.currentTimeMillis() - start_time,start_time,null,null);
  }
  if (mm != null)   _output.addModelMetrics(mm);
  return mm;
}
