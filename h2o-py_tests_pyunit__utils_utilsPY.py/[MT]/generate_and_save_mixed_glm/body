def generate_and_save_mixed_glm(csv_filename, x_mat, enum_level_vec, enum_col, true_one_hot, weight, noise_std, family_type, class_method='probability', class_margin=0.0):
    "\n    Given the weights and input data matrix with mixed categorical and real value predictors, this function will\n      generate a supervised data set and save the input data and response in a csv format file specified by\n      csv_filename.  It will first encode the enums without using one hot encoding with or without a reference\n      level first before generating a response Y.\n\n    :param csv_filename: string representing full path filename to store supervised data set with reference level\n        plus true one-hot encoding.\n    :param x_mat: predictor matrix with mixed columns (categorical/real values)\n    :param enum_level_vec: vector containing maximum integer value for each categorical column\n    :param enum_col: integer representing actual number of categorical columns in data set\n    :param true_one_hot: bool indicating whether we are using true one hot encoding or reference level plus\n        one hot encoding\n    :param weight: vector representing w in our formula to generate the response\n    :param noise_std: Gaussian noise standard deviation used to generate noise e to add to response\n    :param family_type: string represents the various distribution families (gaussian, multinomial, binomial) supported\n    by our GLM algo\n    :param class_method: string, optional, describing how we derive the final response from the class probabilities\n    generated for binomial and multinomial family_type.  If set to 'probability', response y is generated randomly\n    according to the class probabilities calculated.  If set to 'threshold', response y is set to the class with the\n    maximum class probability if the maximum class probability exceeds the second highest class probability by the\n    value set in the margin.  If the maximum class probability fails to be greater by margin than the second highest\n    class probability, the data sample is discarded.\n    :param class_margin: float, optional, denotes the threshold by how much the maximum class probability has to exceed\n    the second highest class probability in order for us to keep the data sample.  This field is only meaningful if\n    class_method is set to 'threshold'\n\n    :return: None\n    "
    x_mat_encoded = encode_enum_dataset(x_mat, enum_level_vec, enum_col, true_one_hot, False)
    if (not true_one_hot):
        (num_row, num_col) = x_mat_encoded.shape
        weight = weight[0:(num_col + 1)]
    response_y = generate_response_glm(weight, x_mat_encoded, noise_std, family_type, class_method=class_method, class_margin=class_margin)
    if (('multinomial' in family_type.lower()) or ('binomial' in family_type.lower())):
        if ('threshold' in class_method.lower()):
            (x_mat, response_y) = remove_negative_response(x_mat, response_y)
    np.savetxt(csv_filename, np.concatenate((x_mat, response_y), axis=1), delimiter=',')
