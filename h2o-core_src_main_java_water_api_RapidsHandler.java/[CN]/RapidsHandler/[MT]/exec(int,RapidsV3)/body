{
  if (rapids == null)   return null;
  if (rapids.ast == null || rapids.ast.equals(""))   return rapids;
  Throwable e=null;
  try {
    Val val=water.currents.Exec.exec(rapids.ast);
switch (val.type()) {
case Val.NUM:
      rapids.scalar=val.getNum();
    break;
case Val.STR:
  rapids.string=val.getStr();
break;
case Val.FUN:
rapids.funstr=val.getFun().toString();
break;
case Val.FRM:
Frame fr=val.getFrame();
if (fr._key == null) DKV.put(fr=new Frame(fr));
rapids.key=new KeyV3.FrameKeyV3(fr._key);
break;
default :
throw H2O.fail();
}
}
 catch (IllegalArgumentException pe) {
e=pe;
}
catch (Throwable e2) {
Log.err(e=e2);
}
 finally {
if (e != null) {
e.printStackTrace();
rapids.error=(e.getMessage() == null || e instanceof ArrayIndexOutOfBoundsException) ? e.toString() : e.getMessage();
throw new H2OIllegalArgumentException(rapids.error);
}
return rapids;
}
}
