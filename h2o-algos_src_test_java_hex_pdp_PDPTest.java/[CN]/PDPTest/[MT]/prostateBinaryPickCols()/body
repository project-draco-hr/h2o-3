{
  Frame fr=null;
  GBMModel model=null;
  PDP pdp=null;
  try {
    fr=parse_test_file("smalldata/prostate/prostate.csv");
    for (    String s : new String[]{"RACE","GLEASON","DPROS","DCAPS","CAPSULE"}) {
      Vec v=fr.remove(s);
      fr.add(s,v.toCategoricalVec());
      v.remove();
    }
    DKV.put(fr);
    GBMModel.GBMParameters parms=new GBMModel.GBMParameters();
    parms._train=fr._key;
    parms._ignored_columns=new String[]{"ID"};
    parms._response_column="CAPSULE";
    model=new GBM(parms).trainModel().get();
    pdp=new PDP(Key.<PDP>make());
    pdp._cols=new String[]{"DPROS","GLEASON"};
    pdp._nbins=10;
    pdp._model_id=(Key)model._key;
    pdp._frame_id=fr._key;
    pdp.execImpl().get();
    for (    TwoDimTable t : pdp._partial_dependence_data)     Log.info(t);
    Assert.assertTrue(pdp._partial_dependence_data.length == 2);
  }
  finally {
    if (fr != null)     fr.remove();
    if (model != null)     model.remove();
    if (pdp != null)     pdp.remove();
  }
}
