def verify_cloud_size(nodeList=None, expectedCloudName=None, verbose=False, timeoutSecs=10, ignoreHealth=False):
    if (not nodeList):
        nodeList = h2o_nodes.nodes
    expectedSize = len(nodeList)
    cloudStatus = [n.get_cloud(timeoutSecs=timeoutSecs) for n in nodeList]
    cloudSizes = [(c['cloud_size'] + 1) for c in cloudStatus]
    cloudConsensus = [c['consensus'] for c in cloudStatus]
    cloudName = [c['cloud_name'] for c in cloudStatus]
    for (i, c) in enumerate(cloudStatus):
        nodesHealthy = [n['healthy'] for n in c['nodes']]
        if (not all(nodesHealthy)):
            print ('node %s cloud status: %s' % (i, dump_json(c)))
            msg = ('node %s says some node is not reporting node_healthy: %s' % (c['cloud_name'], nodesHealthy))
            if (not ignoreHealth):
                raise Exception(msg)
    if ((expectedSize == 0) or (len(cloudSizes) == 0) or (len(cloudConsensus) == 0)):
        print '\nexpectedSize:', expectedSize
        print 'cloudSizes:', cloudSizes
        print 'cloudConsensus:', cloudConsensus
        raise Exception("Nothing in cloud. Can't verify size")
    for s in cloudSizes:
        consensusStr = ','.join(map(str, cloudConsensus))
        sizeStr = ','.join(map(str, cloudSizes))
        if (s != expectedSize):
            raise Exception(('Inconsistent cloud size.' + ('nodeList report size: %s consensus: %s instead of %d.' % (sizeStr, consensusStr, expectedSize))))
    if expectedCloudName:
        for (i, cn) in enumerate(cloudName):
            if (cn != expectedCloudName):
                print ('node %s has the wrong cloud name: %s expectedCloudName: %s.' % (i, cn, expectedCloudName))
                print 'tearing cloud down'
                tear_down_cloud(nodeList=nodeList, sandboxIgnoreErrors=False)
                raise Exception(('node %s has the wrong cloud name: %s expectedCloudName: %s' % (i, cn, expectedCloudName)))
    return (sizeStr, consensusStr, expectedSize)
