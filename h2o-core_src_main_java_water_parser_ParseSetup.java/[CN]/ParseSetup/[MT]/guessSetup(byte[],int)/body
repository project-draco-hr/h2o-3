{
  assert _is_valid;
  ParseSetup ps=guessSetup(bits,_single_quotes,checkHeader);
  if (!ps._is_valid)   return ps;
  if ((_parse_type == ParserType.CSV || _parse_type == ParserType.AUTO) && ps._parse_type == ParserType.ARFF) {
    if (ps._separator == ParseSetup.AUTO_SEP && _separator != ParseSetup.AUTO_SEP)     ps._separator=_separator;
    return ps;
  }
  if (_parse_type == ParserType.ARFF && (ps._parse_type == ParserType.CSV || _parse_type == ParserType.AUTO)) {
    if (ps._separator != ParseSetup.AUTO_SEP && _separator == ParseSetup.AUTO_SEP)     _separator=ps._separator;
    return this;
  }
  if (_parse_type != ps._parse_type || ((_parse_type == ParserType.CSV && (_separator != ps._separator || _number_columns != ps._number_columns)) || (_parse_type == ParserType.ARFF && (_separator != ps._separator || _number_columns != ps._number_columns)))) {
    ps._is_valid=false;
    ps._errors=new String[]{"Conflicting file layouts, expecting: " + this + " but found "+ ps+ "\n"};
    return ps;
  }
  ps._column_types=_column_types;
  return ps;
}
