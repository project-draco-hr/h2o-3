{
  GLMModel gm=(GLMModel)m;
  computeAIC();
  ModelMetrics metrics=_metricBuilder.makeModelMetrics(gm,f);
  if (_parms._family == Family.binomial) {
    ModelMetricsBinomial metricsBinomial=(ModelMetricsBinomial)metrics;
    metrics=new ModelMetricsBinomialGLM(gm,f,metrics._MSE,_domain,metricsBinomial._sigma,metricsBinomial._auc,metricsBinomial._logloss,residualDeviance(),nullDeviance(),aic,nullDOF(),resDOF());
  }
 else {
    ModelMetricsRegression metricsRegression=(ModelMetricsRegression)metrics;
    metrics=new ModelMetricsRegressionGLM(gm,f,metricsRegression._MSE,metricsRegression._sigma,residualDeviance(),residualDeviance() / _wcount,nullDeviance(),aic,nullDOF(),resDOF());
  }
  return gm._output.addModelMetrics(metrics);
}
