{
  GLMModel gm=(GLMModel)m;
  computeAIC();
  ModelMetrics metrics=_metrics == null ? _metricBuilder.makeModelMetrics(m,f) : _metrics;
  if (_parms._family == Family.binomial) {
    ModelMetricsBinomial metricsBinommial=(ModelMetricsBinomial)metrics;
    metrics=new ModelMetricsBinomialGLM(m,f,metrics._MSE,_domain,metricsBinommial._sigma,metricsBinommial._auc,metricsBinommial._logloss,residualDeviance(),nullDeviance(),aic,nullDOF(),resDOF());
  }
 else {
    ModelMetricsRegression metricsRegression=(ModelMetricsRegression)metrics;
    metrics=new ModelMetricsRegressionGLM(m,f,metricsRegression._MSE,metricsRegression._sigma,residualDeviance(),residualDeviance() / _wcount,nullDeviance(),aic,nullDOF(),resDOF());
  }
  DKV.put(metrics._key,metrics);
  return gm._output.addModelMetrics(metrics);
}
