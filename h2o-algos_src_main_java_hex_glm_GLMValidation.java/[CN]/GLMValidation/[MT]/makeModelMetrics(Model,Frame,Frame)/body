{
  GLMModel gm=(GLMModel)m;
  computeAIC();
  ModelMetrics metrics=_metricBuilder.makeModelMetrics(gm,f,null);
  if (_parms._family == Family.binomial) {
    ModelMetricsBinomial metricsBinommial=(ModelMetricsBinomial)metrics;
    metrics=new ModelMetricsBinomialGLM(m,f,metrics._MSE,_domain,metricsBinommial._sigma,metricsBinommial._auc,metricsBinommial._logloss,residualDeviance(),nullDeviance(),_aic,nullDOF(),resDOF(),metricsBinommial.gainsLift());
  }
 else   if (_parms._family == Family.multinomial) {
    ModelMetricsMultinomial metricsMultinomial=(ModelMetricsMultinomial)metrics;
    metrics=new ModelMetricsMultinomialGLM(m,f,metricsMultinomial._MSE,metricsMultinomial._domain,metricsMultinomial._sigma,metricsMultinomial._cm,metricsMultinomial._hit_ratios,metricsMultinomial._logloss,residualDeviance(),nullDeviance(),_aic,nullDOF(),resDOF());
  }
 else {
    ModelMetricsRegression metricsRegression=(ModelMetricsRegression)metrics;
    metrics=new ModelMetricsRegressionGLM(m,f,metricsRegression._MSE,metricsRegression._sigma,residualDeviance(),residualDeviance() / _wcount,nullDeviance(),_aic,nullDOF(),resDOF());
  }
  return gm._output.addModelMetrics(metrics);
}
