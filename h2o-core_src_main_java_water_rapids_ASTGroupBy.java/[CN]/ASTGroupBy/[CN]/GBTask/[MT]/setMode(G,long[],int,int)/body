{
  if (arr == null && lvl == -1)   throw new IllegalArgumentException("Trying to compute mode on a non-categorical column.");
  long o;
  if (arr == null) {
    o=g._m[c][lvl];
    while (!G.CAS_m(g,c,lvl,o,o + 1))     o=g._m[c][lvl];
  }
 else {
    for (int l=0; l < g._m[c].length; ++l) {
      o=g._m[c][l];
      while (!G.CAS_m(g,c,l,o,o + arr[l]))       o=g._m[c][l];
    }
  }
}
