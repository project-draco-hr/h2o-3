{
  DTask origDt=_dt;
  DTask dt=origDt;
  do {
    AutoBuffer ab=null;
    try {
      ab=new AutoBuffer(_client).putTask(UDP.udp.ack,_tsknum).put1(SERVER_UDP_SEND);
      dt.write(ab);
      _computed=true;
      boolean t=ab.hasTCP();
      dt._repliedTcp=t;
      ab.close(t,false);
      break;
    }
 catch (    AutoBuffer.TCPIsUnreliableException e) {
      Log.info("Task cancelled or network congestion: TCPACK " + e._ioe.getMessage() + ", t#"+ _tsknum+ " AB="+ ab+ ", waiting and retrying...");
      if (ab != null)       ab.close(true,true);
      try {
        Thread.sleep(500);
      }
 catch (      InterruptedException ignore) {
      }
    }
  }
 while ((dt=_dt) != null);
  if (dt == null)   Log.info("Cancelled remote task#" + _tsknum + " "+ origDt.getClass()+ " to "+ _client+ " has been cancelled by remote");
 else   if ((dt instanceof DRemoteTask || dt instanceof MRTask) && dt.logVerbose())   Log.debug("Done  remote task#" + _tsknum + " "+ dt.getClass()+ " to "+ _client);
  _client.record_task_answer(this);
}
