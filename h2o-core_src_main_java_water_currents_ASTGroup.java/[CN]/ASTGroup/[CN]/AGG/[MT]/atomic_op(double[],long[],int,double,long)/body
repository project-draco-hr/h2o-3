{
  double d;
  long n;
  if (!Double.isNaN(d1) || _na == NAHandling.ALL)   while (!AtomicUtils.DoubleArray.CAS(d0s,i,d=d0s[i],_fcn.op(d,d1)))   ;
  if (!Double.isNaN(d1) || _na == NAHandling.IGNORE)   while (!AtomicUtils.LongArray.CAS(n0s,i,n=n0s[i],n + n1))   ;
}
