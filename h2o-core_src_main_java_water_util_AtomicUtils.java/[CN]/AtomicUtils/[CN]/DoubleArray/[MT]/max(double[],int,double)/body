{
  double old;
  while (!CAS(ds,i,old=ds[i],Math.max(old,max)))   ;
}
