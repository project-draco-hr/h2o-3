{
  int len=0, x;
  while (len < buf.length && (x=is.read(buf,len,buf.length - len)) != -1)   len+=x;
  return len;
}
