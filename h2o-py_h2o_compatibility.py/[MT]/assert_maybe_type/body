def assert_maybe_type(s, name, stype, typename=None):
    u'Assert that the argument is either of the specified type or None.'
    if (not ((s is None) or isinstance(s, stype))):
        nn = ((u'`%s`' % name) if name else u'Argument')
        tn = (typename or type(stype).__name__)
        raise ValueError((u'%s should have been a %s, got %s' % (nn, tn, type(s))))
