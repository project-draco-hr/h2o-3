{
  ArrayList<Double> dbls=new ArrayList<>();
  while (!E.isEnd()) {
    AST a=E.parse();
    if (a instanceof ASTNum)     dbls.add(((ASTNum)a)._d);
 else     if (a instanceof ASTSpan)     spans.add((ASTSpan)a);
  }
  E.eatEnd();
  _d=new double[dbls.size()];
  int i=0;
  for (  double d : dbls)   _d[i++]=d;
  if (spans.size() != 0)   _spans=spans.toArray(new ASTSpan[spans.size()]);
  ASTDoubleList res=(ASTDoubleList)clone();
  res._d=_d;
  res._spans=_spans;
  return res;
}
